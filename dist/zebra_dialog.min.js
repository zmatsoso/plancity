!function(D){"use strict";D.Zebra_Dialog=function(){var u,h={animation_speed_hide:250,animation_speed_show:0,auto_close:!(this.version="2.1.1"),auto_focus_button:!0,buttons:!0,center_buttons:!1,custom_class:!1,height:0,keyboard:!0,max_height:0,message:"",modal:!0,overlay_close:!0,overlay_container:"body",overlay_opacity:".9",position:"center",reposition_speed:500,show_close_button:!0,source:!1,title:"",type:"information",vcenter_short_message:!0,width:0,onClose:null},_=this,f={},b=!1,m=function(){var t,e,i,o=D(window).width(),s=D(window).height(),n=_.dialog.width(),a=_.dialog.height(),r={left:0,top:0,right:o-n,bottom:s-a,center:(o-n)/2,middle:(s-a)/2};_.dialog_left=void 0,_.dialog_top=void 0,D.isArray(_.settings.position)&&2===_.settings.position.length&&"string"==typeof _.settings.position[0]&&_.settings.position[0].match(/^(left|right|center)[\s0-9\+\-]*$/)&&"string"==typeof _.settings.position[1]&&_.settings.position[1].match(/^(top|bottom|middle)[\s0-9\+\-]*$/)&&(_.settings.position[0]=_.settings.position[0].toLowerCase(),_.settings.position[1]=_.settings.position[1].toLowerCase(),D.each(r,function(t,e){var i,o;for(i=0;i<2;i++)(o=_.settings.position[i].replace(t,e))!==_.settings.position[i]&&(0===i?_.dialog_left=g(o):_.dialog_top=g(o))})),void 0!==_.dialog_left&&void 0!==_.dialog_top||(_.dialog_left=r.center,_.dialog_top=r.middle),_.dialog_top<0&&(_.dialog_top=0),s<a&&_.body.css("height",s-(D(".ZebraDialog_Title",_.dialog)?D(".ZebraDialog_Title",_.dialog).outerHeight():0)-(D(".ZebraDialog_Buttons",_.dialog)?D(".ZebraDialog_Buttons",_.dialog).outerHeight():0)-(parseFloat(_.body.css("paddingTop"))||0)-(parseFloat(_.body.css("paddingBottom"))||0)-(parseFloat(_.body.css("borderTopWidth"))||0)-(parseFloat(_.body.css("borderBottomWidth"))||0)),_.settings.vcenter_short_message&&(e=(t=_.body.find("div:first")).height())<(i=_.body.height())&&t.css("padding-top",(i-e)/2),"boolean"==typeof arguments[0]&&!1===arguments[0]||0===_.settings.reposition_speed?_.dialog.css({left:_.dialog_left,top:_.dialog_top,visibility:"visible",opacity:0}).animate({opacity:"1"},_.settings.animation_speed_show):(_.dialog.stop(!0),_.dialog.css("visibility","visible").animate({left:_.dialog_left,top:_.dialog_top},_.settings.reposition_speed)),void 0===u&&(!1!==_.settings.auto_focus_button?_.dialog.find("a[class^=ZebraDialog_Button]").eq(!0===_.settings.auto_focus_button?0:_.settings.auto_focus_button).focus():_.body.attr("tabindex",1).focus().removeAttr("tabindex")),_.isIE6&&setTimeout(y,500)},y=function(){var t=D(window).scrollTop(),e=D(window).scrollLeft();_.settings.modal&&_.overlay.css({top:t,left:e}),_.dialog.css({left:_.dialog_left+e,top:_.dialog_top+t})},v=function(){switch(_.settings.type){case"confirmation":case"error":case"information":case"question":case"warning":case"prompt":return _.settings.type.charAt(0).toUpperCase()+_.settings.type.slice(1).toLowerCase();default:return!1}},g=function(t){var e=0;for(t=t.replace(/\s/g,"").match(/[+\-]?([0-9\.\s]+)/g)||[];t.length;)e+=parseFloat(t.shift());return e},w={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){var e,i,o;for(e=0;e<t.length;e++)if(i=t[e].string,o=t[e].prop,this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!==i.indexOf(t[e].subString))return t[e].identity}else if(o)return t[e].identity},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};return _.settings={},"string"==typeof arguments[0]&&(f.message=arguments[0]),"object"!=typeof arguments[0]&&"object"!=typeof arguments[1]||(f=D.extend(f,"object"==typeof arguments[0]?arguments[0]:arguments[1])),_.init=function(){var t,o,e,i,s,n,a,r,g,l,c,d,p=0;if(_.settings=D.extend({},h,f),_.isIE6="explorer"===w.name&&6===w.version||!1,_.settings.modal&&(_.overlay=D("<div>",{"class":"ZebraDialogOverlay"}).css({position:_.isIE6?"absolute":"fixed",left:0,top:0,opacity:_.settings.overlay_opacity+""}),"body"!==_.settings.overlay_container&&(d=(c=_.settings.overlay_container).offset(),_.overlay.css({left:d.left,top:d.top,width:c.outerWidth(),height:c.outerHeight()})),_.settings.overlay_close&&_.overlay.on("click",function(){_.close()}),_.overlay.appendTo(_.settings.overlay_container)),_.dialog=D("<div>",{"class":"ZebraDialog"+(_.settings.custom_class?" "+_.settings.custom_class:"")+(!1!==v()?" ZebraDialog_Icon ZebraDialog_"+v():"")}).css({position:_.isIE6?"absolute":"fixed",left:0,top:0,visibility:"hidden"}),D(".ZebraDialog").each(function(){var t=D(this).css("zIndex");t&&p<t&&(p=t)}),0<p&&_.dialog.css("zIndex",p+1),!_.settings.buttons&&_.settings.auto_close&&_.dialog.attr("id","ZebraDialog_"+Math.floor(9999999*Math.random())),g=parseInt(_.settings.width,10),!isNaN(g)&&g===_.settings.width&&g.toString()===_.settings.width.toString()&&0<g&&_.dialog.css("width",_.settings.width),_.settings.title?r=D("<h3>",{"class":"ZebraDialog_Title"}).html(_.settings.title).appendTo(_.dialog):_.dialog.addClass("ZebraDialog_NoTitle"),_.body=D("<div>",{"class":"ZebraDialog_Body"}),0<_.settings.height&&_.body.css("height",_.settings.height),0<_.settings.max_height&&(_.body.css("max-height",_.settings.max_height),_.isIE6&&_.body.attr("style","height: expression(this.scrollHeight > "+_.settings.max_height+' ? "'+_.settings.max_height+'px" : "85px")')),"prompt"===_.settings.type&&(_.settings.message+='<input type="text" name="ZebraDialog_Prompt_Input" class="ZebraDialog_Prompt_Input">'),_.settings.vcenter_short_message?D("<div>").html(_.settings.message).appendTo(_.body):_.body.html(_.settings.message),"prompt"===_.settings.type&&D(".ZebraDialog_Prompt_Input",_.body).on("keypress",function(t){13===t.keyCode&&(b?b.trigger("click"):_.close(!0,this.value))}),_.settings.source&&"object"==typeof _.settings.source)for(l in i=_.settings.vcenter_short_message?D("div:first",_.body):_.body,_.settings.source)switch(l){case"ajax":t="string"==typeof _.settings.source[l]?{url:_.settings.source[l]}:_.settings.source[l],a=D("<div>").attr("class","ZebraDialog_Preloader").appendTo(i),t.success=function(t){a.remove(),i.append(t),m(!1)},D.ajax(t);break;case"iframe":s={width:"100%",height:"100%",marginheight:"0",marginwidth:"0",frameborder:"0"},n=D.extend(s,"string"==typeof _.settings.source[l]?{src:_.settings.source[l]}:_.settings.source[l]),i.append(D("<iframe>").attr(n));break;case"inline":i.append(_.settings.source[l])}return _.body.appendTo(_.dialog),(e=function(){if(!0!==_.settings.buttons&&!D.isArray(_.settings.buttons))return!1;if(!0===_.settings.buttons)switch(_.settings.type){case"question":case"warning":case"prompt":_.settings.buttons=["Ok","Cancel"];break;default:_.settings.buttons=["Ok"]}return _.settings.buttons}())?(o=D("<div>",{"class":"ZebraDialog_Buttons"}).appendTo(_.dialog),D.each(e,function(t,i){var e=D("<a>",{href:"javascript:void(0)","class":"ZebraDialog_Button_"+t+(void 0!==i.custom_class&&""!==i.custom_class.toString().trim()?" "+i.custom_class:"")});void 0!==i.caption?e.html(i.caption):e.html(i),e.on("click",function(){var t=!0,e="prompt"===_.settings.type&&D(".ZebraDialog_Prompt_Input",_.body).length?D(".ZebraDialog_Prompt_Input",_.body).val():void 0;void 0!==i.callback&&(t=i.callback(_.dialog,e)),!1!==t&&_.close(void 0!==i.caption?i.caption:i,e)}),e.appendTo(o),void 0!==i.default_confirmation&&i.default_confirmation&&(b=e)}),_.settings.center_buttons&&o.addClass("ZebraDialog_Buttons_Centered")):_.dialog.addClass("ZebraDialog_NoButtons"),_.dialog.appendTo("body"),_.settings.show_close_button?D('<a href="javascript:void(0)" class="ZebraDialog_Close">&times;</a>').on("click",function(t){t.preventDefault(),_.close()}).appendTo(r||_.body):_.dialog.addClass("ZebraDialog_NoCloseButton"),D(window).on("resize.Zebra_Dialog",function(){clearTimeout(u),u=setTimeout(function(){m()},100)}),_.settings.keyboard&&D(document).on("keyup.Zebra_Dialog",function(t){return 27===t.which&&_.close(),!0}),_.isIE6&&D(window).on("scroll.Zebra_Dialog",function(){y()}),!1!==_.settings.auto_close&&(_.dialog.on("click",function(){clearTimeout(_.timeout),_.close()}),_.timeout=setTimeout(_.close,_.settings.auto_close)),m(!1),"prompt"===_.settings.type&&D(".ZebraDialog_Prompt_Input",_.body).focus(),_},_.close=function(t,e){D(document).off(".Zebra_Dialog"),D(window).off(".Zebra_Dialog"),_.overlay&&_.overlay.animate({opacity:"0"},_.settings.animation_speed_hide,function(){_.overlay.remove()}),_.dialog.animate({top:"0",opacity:"0"},_.settings.animation_speed_hide,function(){_.dialog.remove(),_.settings.onClose&&"function"==typeof _.settings.onClose&&_.settings.onClose(void 0!==t?t:"",e)})},_.update=function(){clearTimeout(u),u=setTimeout(function(){m()},100)},w.init(),_.init()}}(jQuery);